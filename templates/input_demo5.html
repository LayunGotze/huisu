<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
    <meta charset="utf-8">
    <link rel="icon" href="https://static.jianshukeji.com/highcharts/images/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        /* css 代码  */
    </style>
    <script src="https://img.hcharts.cn/jquery/jquery-1.8.3.min.js"></script>
    <script src="https://img.hcharts.cn/highcharts/highcharts.js"></script>
    <script src="https://img.hcharts.cn/highcharts/modules/exporting.js"></script>
    <script src="https://img.hcharts.cn/highcharts/modules/oldie.js"></script>
    <script src="https://img.hcharts.cn/highcharts-plugins/highcharts-zh_CN.js"></script>
    {% load staticfiles %}
    <script src="{% static 'js/hot_chart.js' %}"></script>
    <script src="{% static 'js/hot_chart2.js' %}"></script>
    <script type="text/javascript" src="{%static "js/echarts.js" %}"></script>
    <script type="text/javascript" src="{%static "js/info_base.js" %}"></script>
</head>

<body>
    <div id="test">
        <span>施事者姓名:</span><input type="text" name="actor1_1" id="actor1_1" />
        <span>受事者姓名:</span><input type="text" name="actor1_2" id="actor1_2" />
        <span>事件:</span>
        <span>事件</span>
        <select id="code">
            <option value="口头合作">口头合作</option>
            <option value="实际合作">实际合作</option>
            <option value="合作">合作</option>
            <option value="口头冲突">口头冲突</option>
            <option value="实际冲突">实际冲突</option>
            <option value="冲突">冲突</option>
            <option value="全部">全部</option>
        </select>
        <span>开始时间</span><input type="date" name="start" id="start" />
        <span>截止时间</span><input type="date" name="end" id="end" />
        <input type="button" onclick="click3()" value="Submit" />
        <button onclick="click2()"><span>添加</span></button>
    </div>

    <div class="col-md-10" id="event1" style="display: none">
        <h3 class="headline first-child"><span class="fa fa-area-chart"></span></h3>
        <div class="col-md-12">
            <div id="quadclass_1" style="width: 100%;height: 600px"></div>
        </div>
    </div>
    <div class="col-md-10" id="event2" style="display: none">
        <h3 class="headline first-child"><span class="fa fa-area-chart"></span></h3>
        <div class="col-md-12">
            <div id="quadclass_2" style="width: 100%;height: 600px"></div>
        </div>
    </div>
    <div class="col-md-10" id="event3" style="display: none">
        <h3 class="headline first-child"><span class="fa fa-area-chart"></span></h3>
        <div class="col-md-12">
            <div id="quadclass_3" style="width: 100%;height: 600px"></div>
        </div>
    </div>
    <div class="col-md-10" id="event4" style="display: none">
        <h3 class="headline first-child"><span class="fa fa-area-chart"></span></h3>
        <div class="col-md-12">
            <div id="quadclass_4" style="width: 100%;height: 600px"></div>
        </div>
    </div>
    <div class="col-md-10" id="event5" style="display: none">
        <h3 class="headline first-child"><span class="fa fa-area-chart"></span></h3>
        <div class="col-md-12">
            <div id="quadclass_5" style="width: 100%;height: 600px"></div>
        </div>
    </div>
    <div class="col-md-10" id="event6" style="display: none">
        <h3 class="headline first-child"><span class="fa fa-area-chart"></span></h3>
        <div class="col-md-12">
            <div id="quadclass_6" style="width: 100%;height: 600px"></div>
        </div>
    </div>
    <div class="col-md-10" id="event7" style="display: none">
        <h3 class="headline first-child"><span class="fa fa-area-chart"></span></h3>
        <div class="col-md-12">
            <div id="quadclass_7" style="width: 100%;height: 600px"></div>
        </div>
    </div>
    <div class="col-md-10" id="event8" style="display: none">
        <h3 class="headline first-child"><span class="fa fa-area-chart"></span></h3>
        <div class="col-md-12">
            <div id="quadclass_8" style="width: 100%;height: 600px"></div>
        </div>
    </div>
    <div class="col-md-10" id="event9" style="display: none">
        <h3 class="headline first-child"><span class="fa fa-area-chart"></span></h3>
        <div class="col-md-12">
            <div id="quadclass_9" style="width: 100%;height: 600px"></div>
        </div>
    </div>
    <div class="col-md-10" id="event10" style="display: none">
        <h3 class="headline first-child"><span class="fa fa-area-chart"></span></h3>
        <div class="col-md-12">
            <div id="quadclass_10" style="width: 100%;height: 600px"></div>
        </div>
    </div>
    <div class="col-md-10" id="event11" style="display: none">
        <h3 class="headline first-child"><span class="fa fa-area-chart"></span></h3>
        <div class="col-md-12">
            <div id="quadclass_11" style="width: 100%;height: 600px"></div>
        </div>
    </div>
    <div class="col-md-10" id="event12" style="display: none">
        <h3 class="headline first-child"><span class="fa fa-area-chart"></span></h3>
        <div class="col-md-12">
            <div id="quadclass_12" style="width: 100%;height: 600px"></div>
        </div>
    </div>
    <div class="col-md-10" id="event13" style="display: none">
        <h3 class="headline first-child"><span class="fa fa-area-chart"></span></h3>
        <div class="col-md-12">
            <div id="quadclass_13" style="width: 100%;height: 600px"></div>
        </div>
    </div>
    <div class="col-md-10" id="event14" style="display: none">
        <h3 class="headline first-child"><span class="fa fa-area-chart"></span></h3>
        <div class="col-md-12">
            <div id="quadclass_14" style="width: 100%;height: 600px"></div>
        </div>
    </div>
    <div class="col-md-10" id="event15" style="display: none">
        <h3 class="headline first-child"><span class="fa fa-area-chart"></span></h3>
        <div class="col-md-12">
            <div id="quadclass_15" style="width: 100%;height: 600px"></div>
        </div>
    </div>
    <div class="col-md-10" id="event16" style="display: none">
        <h3 class="headline first-child"><span class="fa fa-area-chart"></span></h3>
        <div class="col-md-12">
            <div id="quadclass_16" style="width: 100%;height: 600px"></div>
        </div>
    </div>
    <div class="col-md-10" id="event17" style="display: none">
        <h3 class="headline first-child"><span class="fa fa-area-chart"></span></h3>
        <div class="col-md-12">
            <div id="quadclass_17" style="width: 100%;height: 600px"></div>
        </div>
    </div>
    <div class="col-md-10" id="event18" style="display: none">
        <h3 class="headline first-child"><span class="fa fa-area-chart"></span></h3>
        <div class="col-md-12">
            <div id="quadclass_18" style="width: 100%;height: 600px"></div>
        </div>
    </div>
    <div class="col-md-10" id="event19" style="display: none">
        <h3 class="headline first-child"><span class="fa fa-area-chart"></span></h3>
        <div class="col-md-12">
            <div id="quadclass_19" style="width: 100%;height: 600px"></div>
        </div>
    </div>
    <div class="col-md-10" id="event20" style="display: none">
        <h3 class="headline first-child"><span class="fa fa-area-chart"></span></h3>
        <div class="col-md-12">
            <div id="quadclass_20" style="width: 100%;height: 600px"></div>
        </div>
    </div>

    <div class="col-md-10">
        <h3 class="headline first-child"><span class="fa fa-area-chart"></span></h3>
        <div class="col-md-12">
            <h1>根类数据时间线</h1>
            <p>根类数据时间线以时间为单位，展示与时间对应的的根类数据，包括(口头合作)Verbal Cooperation，(物质合作)Material Cooperation，(口头冲突)Verbal
                Conflict，(物质冲突)Material Conflict 4种数据，形成时间-根类数据变化曲线图。</p>
        </div>
        <div class="col-md-12">
            <div id="quadclass_graph" style="width: 100%;height: 600px"></div>
        </div>
    </div>
</body>

</html>

<script>
    var cnt = 1;
    function click2() {
        cnt++;
        $('#test').append('<div><span>施事者姓名1:</span><input type="text" name="actor' + cnt + '_1" id="actor' + cnt + '_1" /><span>受事者姓名2:</span><input type="text" name="actor' + cnt + '_2" id="actor' + cnt + '_2" /></div>');
    }
    var event_code_map_reverse={1: '官方声明', 2: '上诉', 3: '表达合作意向', 4: '咨询',
                5: '从事外交合作', 6: '开展物质合作', 7: '提供援助', 8: '投降', 9: '研究',
                10: '需求', 11: '反对', 12: '拒绝', 13: '威胁', 14: '抗议', 15: '展示力量部署',
                16: '减少联系', 17: '强迫', 18: '突击', 19: '战斗',20:'非常规大规模暴力'}
    function click3() {
        var actor1_list = [], actor2_list = [];
        for (var i = 1; i <= cnt; i++) {
            actor1_list.push($('#actor' + i + '_1').val());
            actor2_list.push($('#actor' + i + '_2').val());
        }
        event = $('#code option:selected ').val();
        startdate = $('#start').val();
        enddate = $('#end').val();
        startdate = date_split(startdate);
        enddate = date_split(enddate);
        console.log(actor1_list);
        console.log(actor2_list);
        console.log(event);
        console.log(startdate);
        console.log(enddate);
        $.get('/api/event5/', { 'actor1': actor1_list, 'actor2': actor2_list, 'event': event, 'start': startdate, 'end': enddate }, function (data) {
            console.log(data);
            draw_hot_charts('quadclass_graph', '数据时间线', data['data']);
            for(var i=1;i<=20;i++)
            {
                if (i in data['all']) {
                    //$('#quad'+i).text(event_code_map_reverse[i]+'时间线');
                    $('#event'+i).css('display','inherit');
                    data['all'][i]['legend'][0]=event_code_map_reverse[i]+'时间线';
                    draw_hot_charts('quadclass_'+i, event_code_map_reverse[i]+'时间线', data['all'][i]);
                }
            }
        })
    }

</script>